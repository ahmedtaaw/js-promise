<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>convert function to function wrraped with promise</title>
</head>
<body>
    
                normal function
                <table>
                    <tr>
                        <th>
                            normal function
                        </th>
                        <th>
                            with promise
                        </th>
                    </tr>
                    <tr>
                        <td>
                              
           function http(url,method,successCallback, errorHandler){

            setTimeout(function(){
                var data = 'the answer';
                if(data){
                    successCallback(data);
                }else{
                    errorHandler('No data');
                }
            },1000);

           }

           http('http://www.google.com.eg/','GET',function(data){
               console.log(data);
           },function(err){
               console.log(err);
           });
           
                        </td>
                        <td></td>
                    </tr>
                </table>
           <script>
           
           function http(url,method){
            var promise = new Promise(function(resolve,reject){
                //throw new Error('Error in promise');
                setTimeout(function(){
                    var data = 'the answer';
                    if(data){
                        resolve(data);
                    }else{
                        reject('No data');
                    }
                },1000);
            });
         
            return promise;
           }

           http('http://www.google.com.eg/','GET')
           .then(function(data){
               //console.log(data);
               //throw new Error('error in then');
               return data.toUpperCase();
           })
           .then(function(modifieddata){
               console.log("modified data "+modifieddata);
               return modifieddata;
           })
           .then(function(lastdata){
               console.log("last data "+lastdata);
           })
           .catch(function(err){
               console.log('Catch: '+err);
           });
           
           </script>
</body>
</html>